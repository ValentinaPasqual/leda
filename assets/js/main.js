import{l as S,U as z,a as C}from"./universalFooter-BH0r178q.js";import{i as N}from"./initMap-SJMGpn5m.js";import{p as L}from"./dataParser-7VK0E9mz.js";/* empty css              */import"./_commonjsHelpers-BosuxZz1.js";function D(e){e.project&&e.project.projectShortTitle&&(document.title=e.project.projectShortTitle);const n=document.querySelector('[data-content="project-title"]');n&&(n.textContent=e.project.projectTitle);const r=document.querySelector('[data-content="project-subtitle"]');r&&(r.textContent=e.project.projectSubtitle);const u=document.querySelector('[data-content="map-info-title"]');u&&(u.textContent=e.project.mapInfoTitle);const l=document.querySelector('[data-content="map-info-description"]');l&&(l.textContent=e.project.mapInfoDescription);const o=document.querySelector('[data-content="project-thumbnail"]');if(o&&e.project.projectThumbnailURL){let d=o.querySelector("img");if(d)d.src=e.project.projectThumbnailURL,d.alt=e.project.projectShortTitle||"Logo del progetto";else{o.innerHTML="";const m=document.createElement("img");m.src=e.project.projectThumbnailURL,m.alt=e.project.projectShortTitle||"Logo del progetto",m.className="h-20 object-contain",o.appendChild(m)}}else if(o&&!e.project.projectThumbnailURL){const d=o.querySelector("img");d&&d.remove()}const s=document.querySelector('[data-content="project-name"]');if(s){let d=null;for(let m=0;m<s.childNodes.length;m++)s.childNodes[m].nodeType===Node.TEXT_NODE&&(d=s.childNodes[m]);d&&(d.textContent="Il "+e.project.projectName)}const i=e.project.projectDescription.split("<br><br>"),g=document.querySelector('[data-content="project-description-1"]'),c=document.querySelector('[data-content="project-description-2"]');g&&i.length>0&&(g.textContent=i[0]),c&&i.length>1&&(c.textContent=i[1]),console.log("Contenuti aggiornati con successo")}function M(){const e=document.querySelector(".sections-container"),n=document.querySelectorAll(".section-fullscreen[data-section-id]"),r=document.querySelectorAll(".indicator"),u=document.querySelectorAll(".nav-link"),l=document.querySelectorAll(".section-btn");let o=0,s=!1,i=!1;l.forEach(t=>{t.addEventListener("click",a=>{a.preventDefault();const p=parseInt(t.getAttribute("data-section"));!isNaN(p)&&p>=0&&p<n.length?(console.log(`Navigazione verso sezione ${p} tramite bottone`),c(p)):console.warn(`Sezione target non valida: ${p}`)})});function g(){e&&(e.style.height="100vh",e.style.overflow="auto",e.style.display="block",e.style.scrollBehavior="smooth"),n.forEach(a=>{a.style.minHeight="100vh",a.style.display="flex",a.style.justifyContent="center",a.style.boxSizing="border-box"});const t={margin:"0",padding:"0",boxSizing:"border-box"};Object.assign(document.body.style,t),Object.assign(document.documentElement.style,t),document.documentElement.style.height="100%",document.body.style.height="100%"}function c(t){if(t<0||t>=n.length||s)return;s=!0,i=!0,o=t;const a=n[t];e.scrollTo({top:a.offsetTop-80,behavior:"smooth"}),d(),m(),setTimeout(()=>{s=!1,setTimeout(()=>{i=!1},50)},600)}function d(){r.forEach((t,a)=>{t.classList.toggle("active",a===o)})}function m(){u.forEach((t,a)=>{const p=parseInt(t.getAttribute("data-section"));isNaN(p)||(p===o?(t.classList.remove("text-gray-600"),t.classList.add("text-primary-900","border-b-2","border-primary-600","pb-1")):(t.classList.remove("text-primary-900","border-b-2","border-primary-600","pb-1"),t.classList.add("text-gray-600")))})}r.forEach((t,a)=>{t.addEventListener("click",()=>{c(a)})});let y=0,f=!1;e.addEventListener("wheel",t=>{if(t.preventDefault(),t.stopPropagation(),s||i||f||Math.abs(t.deltaY)<15)return;const a=Date.now();a-y<300||(y=a,f=!0,t.deltaY>0&&o<n.length-1?c(o+1):t.deltaY<0&&o>0&&c(o-1),setTimeout(()=>{f=!1},650))},{passive:!1}),document.addEventListener("keydown",t=>{if(!(s||i))switch(t.key){case"ArrowDown":case"PageDown":t.preventDefault(),o<n.length-1&&c(o+1);break;case"ArrowUp":case"PageUp":t.preventDefault(),o>0&&c(o-1);break;case"Home":t.preventDefault(),c(0);break;case"End":t.preventDefault(),c(n.length-1);break}});let v;e.addEventListener("scroll",()=>{s||i||(clearTimeout(v),v=setTimeout(()=>{const t=e.scrollTop+80;let a=o,p=1/0;n.forEach((h,E)=>{const T=h.offsetTop-80+h.offsetHeight/2,j=Math.abs(t+window.innerHeight/2-T);j<p&&(p=j,a=E)}),o!==a&&(o=a,d(),m())},50))});let b=0,w=0,x=0;e.addEventListener("touchstart",t=>{b=t.touches[0].clientY,x=Date.now()},{passive:!0}),e.addEventListener("touchend",t=>{if(s||i||Date.now()-x>300)return;w=t.changedTouches[0].clientY;const h=b-w;Math.abs(h)>80&&(h>0&&o<n.length-1?c(o+1):h<0&&o>0&&c(o-1))},{passive:!0}),window.addEventListener("resize",()=>{g()}),g(),d(),m(),setTimeout(()=>{g()},100)}async function k(e,n){try{const r="map";let u=document.getElementById(r);e.map||(console.warn("Configurazione della mappa mancante, utilizzo configurazione predefinita"),e.map={initialView:[45.9763,7.6586],initialZoom:8,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map.containerId=r,console.log(`Inizializzazione mappa con container ID: "${r}"`);const l=N(e),o=l.map,s=l.markers,i=l.renderMarkers;n&&Array.isArray(n)?(console.log(`Aggiunti ${n.length} punti alla mappa`),i&&typeof i=="function"?i(n):console.warn("La funzione renderMarkers non è disponibile"),window.alpinismData=n):console.warn("Nessun dato valido trovato o formato dati non valido"),console.log("Mappa inizializzata con successo")}catch(r){console.error("Errore durante l'inizializzazione della mappa:",r);const u=document.querySelector(".map-container")||document.body,l=document.createElement("div");l.className="error-message p-4 bg-red-100 text-red-700 border border-red-300 rounded",l.textContent="Si è verificato un errore durante il caricamento della mappa. Ricarica la pagina per riprovare.",u.appendChild(l)}}function I(e){if(!e.aggregations||typeof e.aggregations!="object")return console.warn("Nessuna configurazione aggregations trovata"),null;if(Object.entries(e.aggregations).length===0)return console.warn("Nessuna aggregation trovata"),null;const r=document.createElement("div");r.className="w-full min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center relative overflow-hidden";const u=document.createElement("div");u.className="absolute top-10 left-10 w-20 h-20 bg-primary-200 rounded-full opacity-20",r.appendChild(u);const l=document.createElement("div");l.className="absolute bottom-10 right-10 w-24 h-24 bg-secondary-200 rounded-full opacity-15",r.appendChild(l);const o=document.createElement("div");o.className="text-center px-6 max-w-4xl mx-auto relative z-10";const s=document.createElement("div");s.className="inline-flex items-center bg-primary-100 text-primary-700 px-4 py-2 rounded-full text-sm font-medium mb-6",s.innerHTML=`
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
    </svg>
    Navigazione per indici
  `;const i=document.createElement("h2");i.className="pb-6 text-4xl sm:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-primary-700 to-secondary-700 bg-clip-text text-transparent",i.textContent="Esplora le categorie";const g=document.createElement("p");g.className="text-xl sm:text-2xl text-gray-600 mb-8 lg:mb-12",g.textContent="Scopri contenuti organizzati per categoria attraverso i gli indici strutturati";const c=document.createElement("a");return c.href="pages/indici.html",c.className="inline-flex items-center bg-primary-600 hover:bg-gradient-to-r hover:from-primary-600 hover:to-secondary-600 text-white px-8 py-4 lg:px-12 lg:py-6 rounded-xl font-semibold text-lg lg:text-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 group",c.innerHTML=`
    <span class="mr-3">Esplora tutti gli indici</span>
    <svg class="w-5 h-5 lg:w-6 lg:h-6 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5-5 5M6 12h12"></path>
    </svg>
  `,o.appendChild(s),o.appendChild(i),o.appendChild(g),o.appendChild(c),r.appendChild(o),r}async function q(e){try{const n=document.getElementById("index-cards-container");if(n){const r=I(e);r&&(n.innerHTML="",n.appendChild(r),console.log("Preview degli indici generata con successo"))}else console.warn("Container index-cards-container non trovato")}catch(n){console.error("Errore preview indici:",n)}}async function A(){try{const e=await S();console.log("Configurazione caricata:",e),new z(e).render(),new C(e).render(),D(e),await q(e);const u=await L();console.log("Dati caricati:",u),await k(e,u),setTimeout(()=>{M()},200)}catch(e){console.error("Errore durante l'inizializzazione dell'app:",e)}}document.addEventListener("DOMContentLoaded",()=>{document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.margin="0",document.documentElement.style.padding="0",A(),window.addEventListener("load",()=>{setTimeout(()=>{const e=document.querySelector(".sections-container");e&&(e.style.height="100vh",e.style.overflow="auto")},300)})});
