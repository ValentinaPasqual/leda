import{l as C,U as N,a as D}from"./universalFooter-DRDAn_Zc.js";import{i as M}from"./initMap-CoPbO_Us.js";import{p as I}from"./dataParser-DPOaL89J.js";/* empty css              */import"./_commonjsHelpers-BosuxZz1.js";function k(e){e.project&&e.project.projectShortTitle&&(document.title=e.project.projectShortTitle);const n=document.querySelector('[data-content="project-title"]');n&&(n.innerHTML=e.project.projectTitle);const r=document.querySelector('[data-content="project-subtitle"]');r&&(r.innerHTML=e.project.projectSubtitle);const u=document.querySelector('[data-content="map-info-title"]');u&&(u.textContent=e.project.mapInfoTitle);const a=document.querySelector('[data-content="map-info-description"]');a&&(a.textContent=e.project.mapInfoDescription);const o=document.querySelector('[data-content="project-thumbnail"]');if(o&&e.project.projectThumbnailURL){let s=o.querySelector("img");if(s)s.src=e.project.projectThumbnailURL,s.alt=e.project.projectShortTitle||"Logo del progetto";else{o.innerHTML="";const i=document.createElement("img");i.src=e.project.projectThumbnailURL,i.alt=e.project.projectShortTitle||"Logo del progetto",i.className="h-20 object-contain",o.appendChild(i)}}else if(o&&!e.project.projectThumbnailURL){const s=o.querySelector("img");s&&s.remove()}const l=document.querySelector('[data-content="project-name"]');if(l){let s=null;for(let i=0;i<l.childNodes.length;i++)l.childNodes[i].nodeType===Node.TEXT_NODE&&(s=l.childNodes[i]);s&&(s.textContent="Il "+e.project.projectName)}const d=document.querySelector('[data-content="project-description"]');d&&(d.innerHTML=e.project.projectDescription),console.log("Contenuti aggiornati con successo")}function A(){const e=document.querySelector(".sections-container"),n=document.querySelectorAll(".section-fullscreen[data-section-id]"),r=document.querySelectorAll(".indicator"),u=document.querySelectorAll(".nav-link"),a=document.querySelectorAll(".section-btn");let o=0,l=!1,d=!1;a.forEach(t=>{t.addEventListener("click",c=>{c.preventDefault();const p=parseInt(t.getAttribute("data-section"));!isNaN(p)&&p>=0&&p<n.length?(console.log(`Navigazione verso sezione ${p} tramite bottone`),i(p)):console.warn(`Sezione target non valida: ${p}`)})});function s(){e&&(e.style.height="100vh",e.style.overflow="auto",e.style.display="block",e.style.scrollBehavior="smooth"),n.forEach(c=>{c.style.minHeight="100vh",c.style.display="flex",c.style.justifyContent="center",c.style.boxSizing="border-box"});const t={margin:"0",padding:"0",boxSizing:"border-box"};Object.assign(document.body.style,t),Object.assign(document.documentElement.style,t),document.documentElement.style.height="100%",document.body.style.height="100%"}function i(t){if(t<0||t>=n.length||l)return;l=!0,d=!0,o=t;const c=n[t];e.scrollTo({top:c.offsetTop-80,behavior:"smooth"}),f(),v(),setTimeout(()=>{l=!1,setTimeout(()=>{d=!1},50)},600)}function f(){r.forEach((t,c)=>{t.classList.toggle("active",c===o)})}function v(){u.forEach((t,c)=>{const p=parseInt(t.getAttribute("data-section"));isNaN(p)||(p===o?(t.classList.remove("text-gray-600"),t.classList.add("text-primary-900","border-b-2","border-primary-600","pb-1")):(t.classList.remove("text-primary-900","border-b-2","border-primary-600","pb-1"),t.classList.add("text-gray-600")))})}r.forEach((t,c)=>{t.addEventListener("click",()=>{i(c)})});let b=0,y=!1;e.addEventListener("wheel",t=>{if(t.preventDefault(),t.stopPropagation(),l||d||y||Math.abs(t.deltaY)<15)return;const c=Date.now();c-b<300||(b=c,y=!0,t.deltaY>0&&o<n.length-1?i(o+1):t.deltaY<0&&o>0&&i(o-1),setTimeout(()=>{y=!1},650))},{passive:!1}),document.addEventListener("keydown",t=>{if(!(l||d))switch(t.key){case"ArrowDown":case"PageDown":t.preventDefault(),o<n.length-1&&i(o+1);break;case"ArrowUp":case"PageUp":t.preventDefault(),o>0&&i(o-1);break;case"Home":t.preventDefault(),i(0);break;case"End":t.preventDefault(),i(n.length-1);break}});let w;e.addEventListener("scroll",()=>{l||d||(clearTimeout(w),w=setTimeout(()=>{const t=e.scrollTop+80;let c=o,p=1/0;n.forEach((m,L)=>{const z=m.offsetTop-80+m.offsetHeight/2,T=Math.abs(t+window.innerHeight/2-z);T<p&&(p=T,c=L)}),o!==c&&(o=c,f(),v())},50))});let x=0,S=0,E=0;e.addEventListener("touchstart",t=>{x=t.touches[0].clientY,E=Date.now()},{passive:!0}),e.addEventListener("touchend",t=>{if(l||d||Date.now()-E>300)return;S=t.changedTouches[0].clientY;const m=x-S;Math.abs(m)>80&&(m>0&&o<n.length-1?i(o+1):m<0&&o>0&&i(o-1))},{passive:!0}),window.addEventListener("resize",()=>{s()}),s(),f(),v(),setTimeout(()=>{s()},100)}const g=document.getElementById("scroll-down-arrow");function h(){const e=document.querySelectorAll(".section-fullscreen[data-section-id]");if(!g||e.length===0)return;const n=window.innerHeight;let r=null,u=0;if(e.forEach(a=>{const o=a.getBoundingClientRect(),l=a.getAttribute("data-section-id"),d=Math.max(0,o.top),s=Math.min(n,o.bottom),i=Math.max(0,s-d);i>u&&(u=i,r=l)}),console.log("Current Section ID:",r),r==="3"){g.classList.remove("active");return}if(r!==null){g.classList.add("active");const a=parseInt(r)+1;g.setAttribute("data-target-section",a),console.log("Target Section:",a)}}g&&g.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("data-target-section");if(n){const r=document.querySelector(`[data-section-id="${n}"]`);r&&(typeof goToSection=="function"?goToSection(parseInt(n)):r.scrollIntoView({behavior:"smooth",block:"start"}))}});window.addEventListener("scroll",function(){window.scrollX!==0&&window.scrollTo(0,window.scrollY)});setTimeout(h,200);window.addEventListener("scroll",h);window.addEventListener("resize",h);const j=document.querySelector(".sections-container");j&&j.addEventListener("scroll",h);async function q(e,n){try{const r="map";let u=document.getElementById(r);e.map||(console.warn("Configurazione della mappa mancante, utilizzo configurazione predefinita"),e.map={initialView:[45.9763,7.6586],initialZoom:8,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map.containerId=r,console.log(`Inizializzazione mappa con container ID: "${r}"`);const a=M(e),o=a.map,l=a.markers,d=a.renderMarkers;n&&Array.isArray(n)?(console.log(`Aggiunti ${n.length} punti alla mappa`),d&&typeof d=="function"?d(n):console.warn("La funzione renderMarkers non è disponibile"),window.alpinismData=n):console.warn("Nessun dato valido trovato o formato dati non valido"),console.log("Mappa inizializzata con successo")}catch(r){console.error("Errore durante l'inizializzazione della mappa:",r);const u=document.querySelector(".map-container")||document.body,a=document.createElement("div");a.className="error-message p-4 bg-red-100 text-red-700 border border-red-300 rounded",a.textContent="Si è verificato un errore durante il caricamento della mappa. Ricarica la pagina per riprovare.",u.appendChild(a)}}function H(e){if(!e.aggregations||typeof e.aggregations!="object")return console.warn("Nessuna configurazione aggregations trovata"),null;if(Object.entries(e.aggregations).length===0)return console.warn("Nessuna aggregation trovata"),null;const r=document.createElement("div");r.className="w-full min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center relative overflow-hidden";const u=document.createElement("div");u.className="absolute top-10 left-10 w-20 h-20 bg-primary-200 rounded-full opacity-20",r.appendChild(u);const a=document.createElement("div");a.className="absolute bottom-10 right-10 w-24 h-24 bg-secondary-200 rounded-full opacity-15",r.appendChild(a);const o=document.createElement("div");o.className="text-center px-6 max-w-4xl mx-auto relative z-10";const l=document.createElement("div");l.className="inline-flex items-center bg-primary-100 text-primary-700 px-4 py-2 rounded-full text-sm font-medium mb-6",l.innerHTML=`
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
    </svg>
    Navigazione per indici
  `;const d=document.createElement("h2");d.className="pb-6 text-4xl sm:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-primary-700 to-secondary-700 bg-clip-text text-transparent",d.textContent="Esplora le categorie";const s=document.createElement("p");s.className="text-xl sm:text-2xl text-gray-600 mb-8 lg:mb-12",s.textContent="Scopri contenuti organizzati per categoria attraverso i gli indici strutturati";const i=document.createElement("a");return i.href="pages/indici.html",i.className="inline-flex items-center bg-primary-600 hover:bg-gradient-to-r hover:from-primary-600 hover:to-secondary-600 text-white px-8 py-4 lg:px-12 lg:py-6 rounded-xl font-semibold text-lg lg:text-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 group",i.innerHTML=`
    <span class="mr-3">Vai agli indici</span>
    <svg class="w-5 h-5 lg:w-6 lg:h-6 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5-5 5M6 12h12"></path>
    </svg>
  `,o.appendChild(l),o.appendChild(d),o.appendChild(s),o.appendChild(i),r.appendChild(o),r}async function B(e){try{const n=document.getElementById("index-cards-container");if(n){const r=H(e);r&&(n.innerHTML="",n.appendChild(r),console.log("Preview degli indici generata con successo"))}else console.warn("Container index-cards-container non trovato")}catch(n){console.error("Errore preview indici:",n)}}async function U(){try{const e=await C();console.log("Configurazione caricata:",e),new N(e).render(),new D(e).render(),k(e),await B(e);const u=await I();console.log("Dati caricati:",u),await q(e,u),setTimeout(()=>{A()},200)}catch(e){console.error("Errore durante l'inizializzazione dell'app:",e)}}document.addEventListener("DOMContentLoaded",()=>{document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.margin="0",document.documentElement.style.padding="0",U(),window.addEventListener("load",()=>{setTimeout(()=>{const e=document.querySelector(".sections-container");e&&(e.style.height="100vh",e.style.overflow="auto")},300)})});
