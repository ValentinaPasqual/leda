import{l as L,U as N,a as D}from"./universalFooter-Bi7OIp2F.js";import{i as I}from"./initMap-B_B7VzZC.js";import{p as M}from"./dataParser-C786ZDmb.js";/* empty css              */import"./_commonjsHelpers-BosuxZz1.js";function k(e){e.project&&e.project.projectShortTitle&&(document.title=e.project.projectShortTitle);const n=document.querySelector('[data-content="project-title"]');n&&(n.textContent=e.project.projectTitle);const r=document.querySelector('[data-content="project-subtitle"]');r&&(r.textContent=e.project.projectSubtitle);const d=document.querySelector('[data-content="map-info-title"]');d&&(d.textContent=e.project.mapInfoTitle);const i=document.querySelector('[data-content="map-info-description"]');i&&(i.textContent=e.project.mapInfoDescription);const o=document.querySelector('[data-content="project-thumbnail"]');if(o&&e.project.projectThumbnailURL){let u=o.querySelector("img");if(u)u.src=e.project.projectThumbnailURL,u.alt=e.project.projectShortTitle||"Logo del progetto";else{o.innerHTML="";const m=document.createElement("img");m.src=e.project.projectThumbnailURL,m.alt=e.project.projectShortTitle||"Logo del progetto",m.className="h-20 object-contain",o.appendChild(m)}}else if(o&&!e.project.projectThumbnailURL){const u=o.querySelector("img");u&&u.remove()}const l=document.querySelector('[data-content="project-name"]');if(l){let u=null;for(let m=0;m<l.childNodes.length;m++)l.childNodes[m].nodeType===Node.TEXT_NODE&&(u=l.childNodes[m]);u&&(u.textContent="Il "+e.project.projectName)}const a=e.project.projectDescription.split("<br><br>"),g=document.querySelector('[data-content="project-description-1"]'),c=document.querySelector('[data-content="project-description-2"]');g&&a.length>0&&(g.textContent=a[0]),c&&a.length>1&&(c.textContent=a[1]),console.log("Contenuti aggiornati con successo")}function A(){const e=document.querySelector(".sections-container"),n=document.querySelectorAll(".section-fullscreen[data-section-id]"),r=document.querySelectorAll(".indicator"),d=document.querySelectorAll(".nav-link"),i=document.querySelectorAll(".section-btn");let o=0,l=!1,a=!1;i.forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const p=parseInt(t.getAttribute("data-section"));!isNaN(p)&&p>=0&&p<n.length?(console.log(`Navigazione verso sezione ${p} tramite bottone`),c(p)):console.warn(`Sezione target non valida: ${p}`)})});function g(){e&&(e.style.height="100vh",e.style.overflow="auto",e.style.display="block",e.style.scrollBehavior="smooth"),n.forEach(s=>{s.style.minHeight="100vh",s.style.display="flex",s.style.justifyContent="center",s.style.boxSizing="border-box"});const t={margin:"0",padding:"0",boxSizing:"border-box"};Object.assign(document.body.style,t),Object.assign(document.documentElement.style,t),document.documentElement.style.height="100%",document.body.style.height="100%"}function c(t){if(t<0||t>=n.length||l)return;l=!0,a=!0,o=t;const s=n[t];e.scrollTo({top:s.offsetTop-80,behavior:"smooth"}),u(),m(),setTimeout(()=>{l=!1,setTimeout(()=>{a=!1},50)},600)}function u(){r.forEach((t,s)=>{t.classList.toggle("active",s===o)})}function m(){d.forEach((t,s)=>{const p=parseInt(t.getAttribute("data-section"));isNaN(p)||(p===o?(t.classList.remove("text-gray-600"),t.classList.add("text-primary-900","border-b-2","border-primary-600","pb-1")):(t.classList.remove("text-primary-900","border-b-2","border-primary-600","pb-1"),t.classList.add("text-gray-600")))})}r.forEach((t,s)=>{t.addEventListener("click",()=>{c(s)})});let b=0,y=!1;e.addEventListener("wheel",t=>{if(t.preventDefault(),t.stopPropagation(),l||a||y||Math.abs(t.deltaY)<15)return;const s=Date.now();s-b<300||(b=s,y=!0,t.deltaY>0&&o<n.length-1?c(o+1):t.deltaY<0&&o>0&&c(o-1),setTimeout(()=>{y=!1},650))},{passive:!1}),document.addEventListener("keydown",t=>{if(!(l||a))switch(t.key){case"ArrowDown":case"PageDown":t.preventDefault(),o<n.length-1&&c(o+1);break;case"ArrowUp":case"PageUp":t.preventDefault(),o>0&&c(o-1);break;case"Home":t.preventDefault(),c(0);break;case"End":t.preventDefault(),c(n.length-1);break}});let w;e.addEventListener("scroll",()=>{l||a||(clearTimeout(w),w=setTimeout(()=>{const t=e.scrollTop+80;let s=o,p=1/0;n.forEach((h,z)=>{const C=h.offsetTop-80+h.offsetHeight/2,j=Math.abs(t+window.innerHeight/2-C);j<p&&(p=j,s=z)}),o!==s&&(o=s,u(),m())},50))});let x=0,S=0,E=0;e.addEventListener("touchstart",t=>{x=t.touches[0].clientY,E=Date.now()},{passive:!0}),e.addEventListener("touchend",t=>{if(l||a||Date.now()-E>300)return;S=t.changedTouches[0].clientY;const h=x-S;Math.abs(h)>80&&(h>0&&o<n.length-1?c(o+1):h<0&&o>0&&c(o-1))},{passive:!0}),window.addEventListener("resize",()=>{g()}),g(),u(),m(),setTimeout(()=>{g()},100)}const f=document.getElementById("scroll-down-arrow");function v(){const e=document.querySelectorAll(".section-fullscreen[data-section-id]");if(!f||e.length===0)return;const n=window.innerHeight;let r=null,d=0;if(e.forEach(i=>{const o=i.getBoundingClientRect(),l=i.getAttribute("data-section-id"),a=Math.max(0,o.top),g=Math.min(n,o.bottom),c=Math.max(0,g-a);c>d&&(d=c,r=l)}),console.log("Current Section ID:",r),r==="3"){f.classList.remove("active");return}if(r!==null){f.classList.add("active");const i=parseInt(r)+1;f.setAttribute("data-target-section",i),console.log("Target Section:",i)}}f&&f.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("data-target-section");if(n){const r=document.querySelector(`[data-section-id="${n}"]`);r&&(typeof goToSection=="function"?goToSection(parseInt(n)):r.scrollIntoView({behavior:"smooth",block:"start"}))}});window.addEventListener("scroll",function(){window.scrollX!==0&&window.scrollTo(0,window.scrollY)});setTimeout(v,200);window.addEventListener("scroll",v);window.addEventListener("resize",v);const T=document.querySelector(".sections-container");T&&T.addEventListener("scroll",v);async function q(e,n){try{const r="map";let d=document.getElementById(r);e.map||(console.warn("Configurazione della mappa mancante, utilizzo configurazione predefinita"),e.map={initialView:[45.9763,7.6586],initialZoom:8,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map.containerId=r,console.log(`Inizializzazione mappa con container ID: "${r}"`);const i=I(e),o=i.map,l=i.markers,a=i.renderMarkers;n&&Array.isArray(n)?(console.log(`Aggiunti ${n.length} punti alla mappa`),a&&typeof a=="function"?a(n):console.warn("La funzione renderMarkers non è disponibile"),window.alpinismData=n):console.warn("Nessun dato valido trovato o formato dati non valido"),console.log("Mappa inizializzata con successo")}catch(r){console.error("Errore durante l'inizializzazione della mappa:",r);const d=document.querySelector(".map-container")||document.body,i=document.createElement("div");i.className="error-message p-4 bg-red-100 text-red-700 border border-red-300 rounded",i.textContent="Si è verificato un errore durante il caricamento della mappa. Ricarica la pagina per riprovare.",d.appendChild(i)}}function H(e){if(!e.aggregations||typeof e.aggregations!="object")return console.warn("Nessuna configurazione aggregations trovata"),null;if(Object.entries(e.aggregations).length===0)return console.warn("Nessuna aggregation trovata"),null;const r=document.createElement("div");r.className="w-full min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex items-center justify-center relative overflow-hidden";const d=document.createElement("div");d.className="absolute top-10 left-10 w-20 h-20 bg-primary-200 rounded-full opacity-20",r.appendChild(d);const i=document.createElement("div");i.className="absolute bottom-10 right-10 w-24 h-24 bg-secondary-200 rounded-full opacity-15",r.appendChild(i);const o=document.createElement("div");o.className="text-center px-6 max-w-4xl mx-auto relative z-10";const l=document.createElement("div");l.className="inline-flex items-center bg-primary-100 text-primary-700 px-4 py-2 rounded-full text-sm font-medium mb-6",l.innerHTML=`
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
    </svg>
    Navigazione per indici
  `;const a=document.createElement("h2");a.className="pb-6 text-4xl sm:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-primary-700 to-secondary-700 bg-clip-text text-transparent",a.textContent="Esplora le categorie";const g=document.createElement("p");g.className="text-xl sm:text-2xl text-gray-600 mb-8 lg:mb-12",g.textContent="Scopri contenuti organizzati per categoria attraverso i gli indici strutturati";const c=document.createElement("a");return c.href="pages/indici.html",c.className="inline-flex items-center bg-primary-600 hover:bg-gradient-to-r hover:from-primary-600 hover:to-secondary-600 text-white px-8 py-4 lg:px-12 lg:py-6 rounded-xl font-semibold text-lg lg:text-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 group",c.innerHTML=`
    <span class="mr-3">Vai agli indici</span>
    <svg class="w-5 h-5 lg:w-6 lg:h-6 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5-5 5M6 12h12"></path>
    </svg>
  `,o.appendChild(l),o.appendChild(a),o.appendChild(g),o.appendChild(c),r.appendChild(o),r}async function B(e){try{const n=document.getElementById("index-cards-container");if(n){const r=H(e);r&&(n.innerHTML="",n.appendChild(r),console.log("Preview degli indici generata con successo"))}else console.warn("Container index-cards-container non trovato")}catch(n){console.error("Errore preview indici:",n)}}async function U(){try{const e=await L();console.log("Configurazione caricata:",e),new N(e).render(),new D(e).render(),k(e),await B(e);const d=await M();console.log("Dati caricati:",d),await q(e,d),setTimeout(()=>{A()},200)}catch(e){console.error("Errore durante l'inizializzazione dell'app:",e)}}document.addEventListener("DOMContentLoaded",()=>{document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.margin="0",document.documentElement.style.padding="0",U(),window.addEventListener("load",()=>{setTimeout(()=>{const e=document.querySelector(".sections-container");e&&(e.style.height="100vh",e.style.overflow="auto")},300)})});
